################################### Cluster ###################################

cluster.name: '<%= node.elasticsearch[:cluster_name] %>'
node.name:    '<%= node.elasticsearch[:node_name]    %>'

#################################### Index ####################################

index.number_of_shards:   <%= node.elasticsearch[:index_shards]   %>
index.number_of_replicas: <%= node.elasticsearch[:index_replicas] %>
action.auto_create_index: <%= node.elasticsearch[:index_auto_create_index] %>
index.mapper.dynamic:     <%= node.elasticsearch[:index_mapper_dynamic] %>


#################################### Paths ####################################

path.data: <%= node.elasticsearch[:data_path] %>
path.logs: <%= node.elasticsearch[:log_path] %>

################################### Memory ####################################

bootstrap.mlockall: <%= node.elasticsearch[:mlockall] %>

################################### Varia #####################################

action.disable_delete_all_indices: <%= node.elasticsearch[:disable_delete_all_indices] %>

################################## Network / HTTP ##################################

<% if node.elasticsearch[:network][:bind_interface] %>
network.bind_host: <%= node.network["ipaddress_#{node.elasticsearch[:network][:bind_interface]}".to_sym] %>
<% end %>	

<% if node.elasticsearch[:network][:publish_interface] %>
network.publish_host: <%= node.network[":ipaddress_#{node.elasticsearch[:network][:publish_interface]}".to_sym] %>
<% end %>

<% if node.elasticsearch[:transport][:tcp_port] %>
transport.tcp.port: <%= node.elasticsearch[:transport][:port] %>
<% end %>

<% if node.elasticsearch[:http][:port] %>
http.port: <%= node.elasticsearch[:http][:port] %>
<% end %>

<% if node.elasticsearch[:http][:max_content_length] %>
http.max_content_length: <%= node.elasticsearch[:http][:max_content_length] %>
<% end %>

################################## Discovery ##################################
<% if node.elasticsearch[:discovery][:multicast]="true" %>
discovery.zen.ping.multicast.enabled: true
<% else %>
<% if node.elasticsearch[:discovery][:type] %>
discovery.type: <%= node.elasticsearch[:discovery][:type] %>
<% end %>
<% unless node.elasticsearch[:cloud][:ec2].values.compact.empty? %>
discovery.ec2.groups: '<%= node.elasticsearch[:cloud][:ec2][:security_group] %>'
<% end %>

<% unless node.elasticsearch[:cloud][:aws].values.compact.empty? %>
cloud.node.auto_attributes: true
cloud.aws.access_key: '<%= node.elasticsearch[:cloud][:aws][:access_key] %>'
cloud.aws.secret_key: '<%= node.elasticsearch[:cloud][:aws][:secret_key] %>'
<% end %>

<% if node.elasticsearch[:gateway][:type] %>
################################## Persistence ##################################
gateway.type: <%= node.elasticsearch[:gateway][:type] %>
<% if node.elasticsearch[:gateway][:s3] %>
gateway.s3.bucket: '<%= node.elasticsearch[:gateway][:s3][:bucket] %>'
<% end %>
<% end %>

#################################### Plugins ####################################
<% unless node.elasticsearch[:plugins_mandatory].empty? %>
plugin.mandatory: <%= node.elasticsearch[:plugins_mandatory] %>
<% end %>
